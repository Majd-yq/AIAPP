<!DOCTYPE html>
<html lang="ar">
  <head>
    <meta charset="UTF-8" />
    <title>Apps</title>
    <link rel="stylesheet" href="Style.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="myFunctions.js" defer></script>
  </head>
  <body>
    <!-- Header -->
    <header>
      <h1>AI's Apps 🤖</h1>
      <p class="subtitle">تطبيقات الذكاء الاصطناعي</p>
    </header>

    <!-- Main Content -->
    <main>
      <section>
        <h2>📋 قائمة التطبيقات</h2>
        <table>
          <thead>
            <tr>
              <th>اسم التطبيق</th>
              <th>الشركة المطورة</th>
              <th>مجال الاستخدام</th>
              <th>مجاني</th>
              <th>التفاصيل</th>
            </tr>
          </thead>
          <tbody id="appsTable">
            <!-- Apps will be added here -->
          </tbody>
        </table>
      </section>
    </main>

    <!-- Footer -->
    <footer>
      <nav>
        <a href="index.html"><span class="icon">🏠</span><span>Home</span></a>
        <a href="AboutUs.html"
          ><span class="icon">ℹ️</span><span>About Us</span></a
        >
        <a href="Add_App.html"
          ><span class="icon">➕</span><span>Add App</span></a
        >
      </nav>
      <p class="copy">© 2025 AI Apps Project</p>
    </footer>

    <script>
      // Seed Data
      const defaultApps = [
        {
          name: "ChatGPT",
          company: "OpenAI",
          field: "General",
          free: "مجاني",
          url: "https://chat.openai.com",
          desc: "مساعد ذكي للمحادثة وتوليد النصوص.",
          image:
            "https://upload.wikimedia.org/wikipedia/commons/0/04/ChatGPT_logo.svg",
          video: "",
        },
        {
          name: "Canva",
          company: "Canva Inc.",
          field: "Design",
          free: "مجاني",
          url: "https://www.canva.com",
          desc: "أداة تصميم سهلة الاستخدام لإنشاء صور وعروض تقديمية.",
          image:
            "https://static.canva.com/web/images/8439b51bb7a19f6e65ce1064bc37c197.svg",
          video: "",
        },
        {
          name: "Notion",
          company: "Notion Labs",
          field: "Productivity",
          free: "مدفوع",
          url: "https://www.notion.so",
          desc: "منصة لتدوين الملاحظات، إدارة المشاريع، وتنظيم العمل.",
          image:
            "https://upload.wikimedia.org/wikipedia/commons/e/e9/Notion-logo.svg",
          video: "",
        },
      ];

      window.onload = function () {
        const table = document.getElementById("appsTable");
        let apps = JSON.parse(localStorage.getItem("appsList"));

        // If no apps in localStorage, use defaultApps
        if (!apps || apps.length === 0) {
          localStorage.setItem("appsList", JSON.stringify(defaultApps));
          apps = defaultApps;
        }

        apps.forEach((app) => {
          const row = table.insertRow();
          row.innerHTML = `
            <td>${app.name}</td>
            <td>${app.company}</td>
            <td>${app.field}</td>
            <td class="free-cell">
              ${app.free === "مجاني" ? "☑️" : ""}
            </td>
            <td><button onclick="toggleDetails(this)">اختر</button></td>
          `;

          const detailsRow = table.insertRow();
          detailsRow.className = "details";
          detailsRow.style.display = "none";
          detailsRow.innerHTML = `
            <td colspan="5">
              <p>🌐 : <a href="${app.url}" target="_blank">${
            app.url
          }</a></p>
              <p>${app.desc}</p>
              ${
                app.image
                  ? `<p><img src="${app.image}" alt="صورة التطبيق" style="max-width:200px; border:1px solid #ccc; border-radius:6px;"></p>`
                  : ""
              }
              ${
                app.video
                  ? app.video.includes("youtube.com") ||
                    app.video.includes("youtu.be")
                    ? `<p>
                        <iframe width="300" height="200" 
                          src="${app.video
                            .replace("watch?v=", "embed/")
                            .replace("youtu.be/", "youtube.com/embed/")}" 
                          frameborder="0" allowfullscreen>
                        </iframe>
                       </p>`
                    : `<p>
                        <video src="${app.video}" controls 
                          style="max-width:300px; border-radius:6px;">
                        </video>
                       </p>`
                  : ""
              }
            </td>
          `;
        });
      };
    </script>
  </body>
</html>
